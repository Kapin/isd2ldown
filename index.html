<!-- Created as a horrible joke and should not be taken seriously. Reiterating that, please don't take the look of this website or anything on it besides Desire2Learn being down seriously. Really... -->
<html>
<head>
<!-- jQuery include -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

<!-- This include allows cross domain get requests -->
<script type="text/javascript" src="https://raw.github.com/padolsey/jQuery-Plugins/master/cross-domain-ajax/jquery.xdomainajax.js"></script>

<!-- Sample -->
<script type="text/javascript">
$(document).ready(function(){
    //gets the href of the first anchor
   setInterval(display(), 5000); 
});

function display() {
    var url = "http://learn.uwaterloo.ca"
    var worked = false;
    
    $.get(url, function(data) {
        worked = true;
        var title = getStringBetween(data.responseText, "<title", "</title>");
        if(title === null || 
           title.toLowerCase().indexOf("down" === -1 ||
           title.toLowerCase().indexOf("not available") === -1)) {
            $('#down').html('YES');
        } else {
            $('#down').html('NO');
        }
    });
    
    if(worked === false) {
        $('#down').html('YES');
    }
    
    $('#date').html("Updated on: " + (new Date()).toLocaleString())
}


function getStringBetween(input, start, end){
    var index = input.indexOf(start);

    if(index != -1){
        index += start.length;
        var endIndex = input.indexOf(end, index + 1);

        if(endIndex != -1)
            return input.substr(index, endIndex - index);
    }
    return false;
}
</script>

</head>
<body>
    <marquee><font size = 144 color=#123456 name='Comic Sans'><p id = "down"></p></font></marquee></br>
    <font size = 50><p id = "date"></p></font>
</body>
</html>
